<% 
const currentPage = 'betting';
const title = 'Place Bet';
const gameId = typeof locals.gameId !== 'undefined' ? locals.gameId : '1';
%>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title><%= title %> - Taj Matka</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="mobile-container">
        
        <!-- Fixed Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="header-left">
                    <button class="menu-btn" onclick="window.history.back()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="19" y1="12" x2="5" y2="12"></line>
                            <polyline points="12 19 5 12 12 5"></polyline>
                        </svg>
                    </button>
                    <h1 class="app-logo" id="gameName">Loading...</h1>
                </div>
                <div class="header-right">
                    <div class="wallet-balance" id="walletBalance">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="2" y="5" width="20" height="14" rx="2"></rect>
                            <line x1="2" y1="10" x2="22" y2="10"></line>
                        </svg>
                        <span id="balanceAmount">₹0</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="app-main">
            <div class="page-content">
                
                <!-- Game Timer Banner -->
                <div style="background: linear-gradient(135deg, #FF4500 0%, #8B0000 100%); padding: 1rem; border-radius: 12px; margin-bottom: 1rem; text-align: center;">
                    <div style="font-size: 0.85rem; margin-bottom: 0.25rem; opacity: 0.9;">Time Left</div>
                    <div class="game-timer" id="gameTimer" style="font-size: 1.5rem; color: #fff;">00:00:00</div>
                </div>

                <!-- Betting Tabs -->
                <div class="betting-tabs">
                    <button class="tab-btn active" data-tab="jodi">Jodi</button>
                    <button class="tab-btn" data-tab="crossing">Crossing</button>
                    <button class="tab-btn" data-tab="copypaste">Copy-Paste</button>
                </div>

                <!-- Tab Content: Jodi -->
                <div class="tab-content active" id="tab-jodi">
                    <div style="text-align: center; margin-bottom: 1rem;">
                        <h3 style="color: #FF4500; font-size: 1.1rem; margin-bottom: 0.5rem;">Jodi Numbers (00-99)</h3>
                        <p style="font-size: 0.85rem; color: #666;">Payout: 90x</p>
                    </div>
                    
                    <div class="jodi-grid" id="jodiGrid">
                        <!-- Generated by JavaScript -->
                    </div>
                </div>

                <!-- Tab Content: Crossing -->
                <div class="tab-content" id="tab-crossing">
                    <div style="text-align: center; margin-bottom: 1rem;">
                        <h3 style="color: #FF4500; font-size: 1.1rem; margin-bottom: 0.5rem;">Crossing</h3>
                        <p style="font-size: 0.85rem; color: #666;">Enter digits to generate all combinations</p>
                    </div>
                    
                    <div style="background: var(--bg-card); padding: 1.5rem; border-radius: 12px;">
                        <div class="amount-input-group">
                            <label>Enter Digits (0-9)</label>
                            <input 
                                type="text" 
                                class="amount-input" 
                                id="crossingDigits" 
                                placeholder="e.g., 1234"
                                maxlength="10"
                                pattern="[0-9]*"
                            >
                        </div>
                        
                        <div id="crossingPreview" style="text-align: center; padding: 1rem; background: var(--bg-input); border-radius: 8px; margin-bottom: 1rem; display: none;">
                            <div style="font-size: 0.85rem; color: #666; margin-bottom: 0.5rem;">Will create</div>
                            <div style="font-size: 1.5rem; font-weight: 700; color: #FF4500;" id="crossingCount">0</div>
                            <div style="font-size: 0.85rem; color: #666;">Jodi combinations</div>
                        </div>
                        
                        <div class="amount-input-group">
                            <label>Amount per Bet (₹)</label>
                            <input 
                                type="number" 
                                class="amount-input" 
                                id="crossingAmount" 
                                placeholder="Enter amount"
                                min="10"
                            >
                        </div>
                        
                        <button class="btn-place-bet" onclick="addCrossingBets()">
                            Add to Bet Slip
                        </button>
                    </div>
                </div>

                <!-- Tab Content: Copy-Paste -->
                <div class="tab-content" id="tab-copypaste">
                    <div style="text-align: center; margin-bottom: 1rem;">
                        <h3 style="color: #FF4500; font-size: 1.1rem; margin-bottom: 0.5rem;">Copy-Paste</h3>
                        <p style="font-size: 0.85rem; color: #666;">Paste multiple numbers (one per line)</p>
                    </div>
                    
                    <div style="background: var(--bg-card); padding: 1.5rem; border-radius: 12px;">
                        <div class="amount-input-group">
                            <label>Numbers (00-99, one per line)</label>
                            <textarea 
                                class="amount-input" 
                                id="pasteNumbers" 
                                placeholder="12&#10;34&#10;56&#10;78"
                                rows="6"
                                style="resize: vertical; font-family: monospace;"
                            ></textarea>
                        </div>
                        
                        <div class="palti-toggle">
                            <div>
                                <div style="font-weight: 600; margin-bottom: 0.25rem;">Enable Palti</div>
                                <div style="font-size: 0.75rem; color: #666;">Auto-create reverse bets (e.g., 12 → 21)</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="paltiToggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div class="amount-input-group">
                            <label>Amount per Bet (₹)</label>
                            <input 
                                type="number" 
                                class="amount-input" 
                                id="pasteAmount" 
                                placeholder="Enter amount"
                                min="10"
                            >
                        </div>
                        
                        <button class="btn-place-bet" onclick="addPasteBets()">
                            Add to Bet Slip
                        </button>
                    </div>
                </div>

            </div>
        </main>

        <!-- Bet Slip (Fixed Bottom Sheet) -->
        <div class="bet-slip" id="betSlip">
            <div class="bet-slip-header">
                <h3 class="bet-slip-title">Bet Slip</h3>
                <button class="bet-slip-close" onclick="closeBetSlip()">×</button>
            </div>
            <div class="bet-slip-content">
                <div class="bet-summary">
                    <div class="bet-summary-item">
                        <div class="bet-summary-label">Total Bets</div>
                        <div class="bet-summary-value" id="totalBets">0</div>
                    </div>
                    <div class="bet-summary-item">
                        <div class="bet-summary-label">Total Amount</div>
                        <div class="bet-summary-value" id="totalAmount">₹0</div>
                    </div>
                </div>
                
                <div id="betList" style="max-height: 200px; overflow-y: auto; margin-bottom: 1rem;">
                    <!-- Bet items will be added here -->
                </div>
                
                <button class="btn-place-bet" onclick="placeBets()">
                    PLACE BET
                </button>
            </div>
        </div>

        <!-- Bottom Navigation -->
         <nav class="bottom-nav">
            <a href="/results" class="nav-item">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                    <path d="M2 17l10 5 10-5M2 12l10 5 10-5"/>
                </svg>
                <span>Results</span>
            </a>
            <a href="/history" class="nav-item">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <polyline points="12 6 12 12 16 14"/>
                </svg>
                <span>History</span>
            </a>
            <a href="/home" class="nav-item nav-item-home">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                    <polyline points="9 22 9 12 15 12 15 22" stroke="var(--bg-primary)" stroke-width="2" fill="none"/>
                </svg>
                <span>Home</span>
            </a>
            <a href="/chart" class="nav-item">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="20" x2="18" y2="10"/>
                    <line x1="12" y1="20" x2="12" y2="4"/>
                    <line x1="6" y1="20" x2="6" y2="14"/>
                </svg>
                <span>Chart</span>
            </a>
            <a href="#" class="nav-item" onclick="shareApp(); return false;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="18" cy="5" r="3"/>
                    <circle cx="6" cy="12" r="3"/>
                    <circle cx="18" cy="19" r="3"/>
                    <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/>
                    <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/>
                </svg>
                <span>Share</span>
            </a>
        </nav>

    </div>

    <!-- Scripts -->
    <script src="/js/app.js"></script>
    <script src="/js/timer.js"></script>
    <script src="/js/betting.js"></script>
</body>
</html>
